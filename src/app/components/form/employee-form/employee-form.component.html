<app-header></app-header>
<div class="flex justify-center mt-8">
  <div class="bg-blue-100 rounded-lg p-8 w-full max-w-md">
    <h2 class="text-2xl font-semibold text-center mb-6">
      {{ isEditMode ? "Edit" : "Create" }} Employee
    </h2>

    <form [formGroup]="employeeForm" (ngSubmit)="onSubmit()" class="space-y-6">
      <div>
        <label
          for="firstName"
          class="block text-sm font-medium text-gray-700 mb-1"
          >First Name</label
        >
        <input
          type="text"
          id="firstName"
          formControlName="firstName"
          class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        />
        @if (employeeForm.get('firstName')?.invalid &&
        employeeForm.get('firstName')?.touched) {
        <small class="text-red-500 text-xs mt-1">First name is required</small>
        }
      </div>

      <div>
        <label
          for="lastName"
          class="block text-sm font-medium text-gray-700 mb-1"
          >Last Name</label
        >
        <input
          type="text"
          id="lastName"
          formControlName="lastName"
          class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        />
        @if (employeeForm.get('lastName')?.invalid &&
        employeeForm.get('lastName')?.touched) {
        <small class="text-red-500 text-xs mt-1">Last name is required</small>
        }
      </div>

      <div>
        <label for="email" class="block text-sm font-medium text-gray-700 mb-1"
          >Email</label
        >
        <input
          type="email"
          id="email"
          formControlName="email"
          class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        />
        @if (employeeForm.get('email')?.invalid &&
        employeeForm.get('email')?.touched) {
        <small class="text-red-500 text-xs mt-1">Valid email is required</small>
        }
      </div>

      <div>
        <label
          for="departmentId"
          class="block text-sm font-medium text-gray-700 mb-1"
          >Department</label
        >
        <select
          id="departmentId"
          formControlName="departmentId"
          class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        >
          <option value="">Select a department</option>
          @for (dept of departments; track dept.id) {
          <option [value]="dept.id">{{ dept.name }}</option>
          }
        </select>
        @if (employeeForm.get('departmentId')?.invalid &&
        employeeForm.get('departmentId')?.touched) {
        <small class="text-red-500 text-xs mt-1">Department is required</small>
        }
      </div>

      <div class="flex justify-between pt-4">
        <button
          type="submit"
          class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors"
          [disabled]="employeeForm.invalid"
          [ngClass]="{ 'opacity-50 cursor-not-allowed': employeeForm.invalid }"
        >
          {{ isEditMode ? "Update" : "Create" }} Employee
        </button>
        <a
          [routerLink]="['/employee-list']"
          class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors"
        >
          Cancel
        </a>
      </div>
    </form>
  </div>
</div>
